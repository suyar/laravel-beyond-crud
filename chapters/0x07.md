# 领域管理（Managing domains）

在前面的章节中，我们讨论了构建领域的核心模块：`dto`、`动作（actions）`、`模型（models）` 和几个相关的概念。在本章中，我们将把重点从技术方面转移到哲学方面：如何开始使用领域，如何识别它们，以及如何长期管理它们?

## 团队协作（Teamwork）

回到第一章，我说过我所写的所有范例和原则都有一个目的：帮助开发团队保持他们的大型 Laravel 应用程序的可维护性。

在写这本书和之前的博客时，一些人表达了他们的担忧：新的目录结构和复杂规则的使用会不会让新开发人员很难立马上手？

如果你是一个熟悉 Laravel 默认项目结构的开发人员，并且熟悉 Laravel 向初学者灌输的思想，那么你确实需要花一些时间来学习这些项目是如何处理的。但是，这并不像有些人想的那样需要大动干戈。

想象一个项目有大约 100 个模型，300 个动作（actions），近 500 条路由。这些项目的主要困难不在于代码的技术结构，而是需要去了解大量的商业知识。你不能期望新的开发人员能够立即理解这个项目正在解决的所有问题。了解代码需要时间，但更重要的是：了解业务也需要时间。魔术方法和间接手段越少，混乱的地方就越少。

理解我在本书中展开的架构体系的目的是必要的。它不是关于如何写最少的代码或者最优雅的代码。它是关于使大型代码库更容易浏览，尽量减少混乱的地方，并保持项目长期健康。

我有这个过程的实践经验。我的同事 Ruben 作为我们一个项目中新的后端开发人员，加入了一个由三个开发人员组成的团队。

这个架构对他来说是新的，即使他以前有使用 Laravel 的经验。所以我们花时间来指导他。仅仅经过几个小时的介绍和结对编程（pair programming），他就能够独立完成这个项目。这肯定需要几个星期的时间来彻底了解这个项目所提供的所有功能，但幸运的是，架构并没有难倒他。相反，它让 Ruben 更专注于业务逻辑。

如果你能坚持看到这里，我希望你能明白，这种架构并不是要成为每个项目的银弹。在很多情况下，更直接的方法可以更好地工作，而在某些情况下，需要更复杂的方法。

## 识别领域（Identifying domains）

随着我们对领域基本构成的了解，问题出现了：我们究竟要如何开始编写实际的代码。你可以使用许多方法去更好地理解你将要构建的内容，我认为其中有两个关键点：

- 即使你是一名开发人员，你的主要目标也是理解业务问题并将其转换为代码。代码本身只是达到目的的一种手段；永远把你的注意力放在你正在解决的问题上。
- 确保你有和客户面对面的时间。你需要花时间去获取编程所需要的相关知识。

实际上，我认为我的工作描述更像是『现实问题和技术解决方案之间的翻译』，而不是『一个编写代码的程序猿』。我坚信，如果你打算在一个长期运行的项目工作，这种心态是非常关键的。你不只是要写代码 —— 你需要理解你要解决的现实世界的问题。

根据你的团队的规模，你可能不需要所有的开发人员和客户之间进行面对面的互动，但所有的开发人员都需要了解他们正在用代码解决的问题。

团队动态是一个复杂的话题，以至于它们应该有自己的书。现在我就保持这个状态，因为从这里开始我们可以讨论如何将这些问题转化为领域。

在第一章中，我写道，这个架构的目的之一是将代码根据它们在现实世界中的意义进行分组，而不是根据技术属性分组。如果你和你的客户放开沟通，你会注意到需要花时间 —— 大量的时间 —— 来对他们的业务有一个全面的了解。通常你的客户自己也不清楚他们想要什么，只有坐下来才开始深入思考。

这就是为什么你不应该害怕领域会随者时间而变化。你可能一开始有一个发票领域（Invoice domain），但半年后发现它已经变得太大，你和你的团队无法完全掌控。也许发票生成和支付是两个独立的复杂系统，所以它们可以被分成两个领域。

我的观点是，不断迭代你的领域结构、不断重构它才能保证它的健康。如果有合适的工具，改变、分割和重构领域一点都不难。

综上所述：不要害怕开始使用领域，因为你以后总是可以重构它们。

因此，如果我想开始使用这种面向领域的架构，我会采取这样的方法：尝试在项目中确定子系统，意识到它们可以 —— 并且会 —— 随着时间的推移而改变。你可以和你的客户坐下来，可以让他们把事情写下来，甚至可以和他们做事件风暴会议（do event storming sessions）。你们一起形成一个项目应有的蓝图（image），而这个蓝图（image）会被逐步完善，也会随着时间的推移而改变。

而且，由于我们的领域代码有最小的依赖性，所以它非常灵活，改动或重构的成本不高。

## 链接

- [目录](../README.md)
- 上一章：[枚举（Enums）](0x06.md)
- 下一章: [领域测试（Testing domains）](0x08.md)
